import{o as z,r as F,a1 as q,N as G,a2 as L,O as W,z as I,E as C,q as H,v as U,f as i,a3 as j,D as J}from"./index-CGAnmY8r.js";import{_ as K}from"./plugin-vueexport-helper-DlAUqK2U.js";import Q from"./TreePage-DPPopPdd.js";import X from"./ScaleVideoPage-grb5rt0p.js";import Y from"./SolarPage-ZkDF3v0N.js";import Z from"./PlanetPage-TjEVibKo.js";import ee from"./MaskPage-CoTJTdTD.js";import te from"./FrontTechOverView-iUMIeCx0.js";import oe from"./DescripPage-DU6pxdB_.js";import ne from"./BackendTechOverView-C_7Uwu5n.js";import"./ScrollTrigger-lnFyu4_T.js";import"./VCard-DkuYQ4Kh.js";import"./index-FIRHilsT.js";import"./VBtn-CHYJZgsz.js";const ae=z({name:"IntroCanvas",emits:["animation-finished"],setup(b,{emit:u}){const n=F(null),w=q().current.value.colors.background;let m,P=performance.now(),a=[],f=0,d=0,r=0,h=0,k=0,_=0,v=1;const S=2,B=()=>{const e=n.value;e!=null&&e.parentNode&&e.parentNode.removeChild(e)},D=()=>{for(let e=0;e<d;e++){const t=h-e*S;if(t<0||t>r*2)continue;const o=t<=r?r-1-t:t-r;o>=0&&o<r&&(a[o][e]=1)}},M=()=>{v=Math.max(0,v-.4)},V=()=>{const e=a[a.length-1];return e[e.length-1]<.1},N=e=>{if(k+=e*1.4,!(k<1))if(k=0,_===0){D(),h++;const t=d*S+r*2;h>t&&V()&&(h=0,_=1)}else _===1&&(M(),v===0&&(_=2,cancelAnimationFrame(m),u("animation-finished"),B()))},R=(e,t,c,o)=>{d=Math.floor(t/50),f=t/d,r=Math.ceil(c/f),a=Array.from({length:r},(s,l)=>Array.from({length:d},(y,A)=>{var p;return((p=a==null?void 0:a[l])==null?void 0:p[A])??0})),N(o),e.fillStyle=E(w,v),e.fillRect(0,0,t,c),e.lineWidth=1;for(let s=0;s<r;s++)for(let l=0;l<d;l++){const y=l*f,A=s*f,p=a[s][l];a[s][l]=Math.max(0,p-.02);const O=.05+p*.95;e.strokeStyle=`rgba(149, 117, 205, ${O})`,e.strokeRect(y,A,f,f)}},E=(e,t)=>{const c=parseInt(e.slice(1,3),16),o=parseInt(e.slice(3,5),16),g=parseInt(e.slice(5,7),16);return`rgba(${c}, ${o}, ${g}, ${t})`},T=e=>{var s;const t=(s=n.value)==null?void 0:s.getContext("2d");if(!t||!n.value)return;const{width:c,height:o}=n.value;t.clearRect(0,0,c,o);const g=e-P;P=e,R(t,c,o,g),m=requestAnimationFrame(T)},$=()=>{const e=n.value;e&&(e.width=e.offsetWidth,e.height=e.offsetHeight)};return G(()=>{L(()=>{$(),window.addEventListener("resize",$),requestAnimationFrame(T)})}),W(()=>{cancelAnimationFrame(m),window.removeEventListener("resize",$)}),{canvas:n}}}),re={ref:"canvas"};function se(b,u,n,x,w,m){return C(),I("canvas",re,null,512)}const ie=K(ae,[["render",se],["__scopeId","data-v-2493bc55"]]),ce={key:0,class:"overflow-x-hidden"},Ce=z({__name:"index",setup(b){const u=F(!1),n=()=>{u.value=!0};return(x,w)=>{const m=ie;return C(),H(J,{class:"pa-0",fluid:""},{default:U(()=>[i(m,{class:"fill-height",onAnimationFinished:n}),u.value?(C(),I("div",ce,[i(Z),i(ee),i(Q),i(X),i(oe),i(Y),i(te),i(ne)])):j("",!0)]),_:1})}}});export{Ce as default};
